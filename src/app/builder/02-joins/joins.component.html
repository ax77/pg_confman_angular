<div class="joins-component">

  <div class="joins-wrapper">

    <div class="select-page-buttons">
      <button
        class="btn"
        (click)="addJoinItem()"
      >add</button>
      <button class="btn">mul</button>
      <button class="btn">div</button>
    </div>

    <div class="joins-list">

      <div
        class="join-item"
        *ngFor="let joinItem of selectService.joinItems$ | async"
      >
        <button
          class="btn"
        >
          {{joinItem.id}}
        </button>

        <!-- <div class="join-type"> -->
        <select
          class="join-type"
          (change)="onJoinTypeChange($event, joinItem.id)"
        >
          <option>{{joinItem.joinType}}</option>
          <option>...</option>
          <option>INNER JOIN</option>
          <option>LEFT OUTER JOIN</option>
          <option>RIGHT OUTER JOIN</option>
          <option>FULL OUTER JOIN</option>
        </select>
        <!-- </div> -->

        <!-- LHS -->
        <select
          class="main-selector"
          (change)="onLeftTableSelect($event, joinItem.id)"
        >
          <option>{{joinItem.lhsTable.tableName}}</option>
          <option>...</option>
          <option *ngFor="let t of selectService.selectedTables$ | async">
            {{t.tableName}}
          </option>
        </select>

        <!-- RHS -->
        <select
          class="main-selector"
          (change)="onRightTableSelect($event, joinItem.id)"
        >
          <option>{{joinItem.rhsTable.tableName}}</option>
          <option>...</option>
          <option *ngFor="let t of selectService.selectedTables$ | async">
            {{t.tableName}}
          </option>
        </select>

        <!-- ON lhs.field = RHS.field -->

        <div style="margin-right: 8px">ON</div>

        <select
          class="main-selector"
          (change)="onLeftFieldSelect($event, joinItem.id)"
        >
          <option>{{joinItem.lhsField.fieldName}}</option>
          <option>...</option>
          <option
            *ngFor="let f of joinItem.lhsTable.fields"
          >
            {{f.fieldName}}
          </option>
        </select>

        <select
          class="conditions"
          (change)="onConditionChange($event, joinItem.id)"
        >
          <option>{{joinItem.condition}}</option>
          <option>...</option>
          <option>=</option>
          <option><></option>
          <option><</option>
          <option>></option>
          <option><=</option>
          <option>>=</option>
        </select>

        <select
          class="main-selector"
          (change)="onRightFieldSelect($event, joinItem.id)"
        >
          <option>{{joinItem.rhsField.fieldName}}</option>
          <option>...</option>
          <option
            *ngFor="let f of joinItem.rhsTable.fields"
          >
            {{f.fieldName}}
          </option>
        </select>

        <!-- TODO: Custom condition -->

        <div class="condition"></div>

      </div> <!-- join-item -->

    </div> <!-- joins-list -->

  </div> <!-- joins-component -->

</div> <!-- joins-component -->
